/*! videojs-chromecast - v0.1.0 - 2016-12-20*/
!function(a,b,c,d){"use strict";var e=b.getComponent("Component"),f=b.getTech("Tech"),g=a.chrome,h=b.extend(f,{constructor:function(a,b){f.prototype.constructor.apply(this,arguments),this.apiMedia_=this.options_.source.apiMedia,this.apiSession_=this.options_.source.apiSession,this.currentTime_=this.options_.source.currentTime,this.paused_=!1,this.apiMedia_.addUpdateListener(this.onMediaStateUpdate_.bind(this)),this.apiSession_.addUpdateListener(this.onSessionUpdate_.bind(this)),this.startProgressTimer_(),this.triggerReady(),this.trigger("loadstart"),this.trigger("loadedmetadata"),this.trigger("loadeddata"),this.trigger("canplay"),this.trigger("canplaythrough"),this.trigger("durationchange")},onSessionUpdate_:function(a){this.apiMedia_&&!a&&this.stopCasting_()},stopCasting_:function(){this.stopTrackingCurrentTime(),clearInterval(this.progressTimer_),this.apiMedia_.stop(),this.apiSession_.stop()},onMediaStateUpdate_:function(){if(this.apiMedia_)switch(this.currentTime_=this.apiMedia_.currentTime,this.apiMedia_.playerState){case g.cast.media.PlayerState.BUFFERING:this.trigger("waiting");break;case g.cast.media.PlayerState.IDLE:this.onIdle_();break;case g.cast.media.PlayerState.PAUSED:this.trigger("pause"),this.paused_=!0;break;case g.cast.media.PlayerState.PLAYING:this.trigger("playing"),this.trigger("play"),this.paused_=!1}},onIdle_:function(){if(this.apiMedia_){switch(this.apiMedia_.idleReason){case g.cast.media.IdleReason.CANCELLED:case g.cast.media.IdleReason.INTERRUPTED:case g.cast.media.IdleReason.ERROR:this.trigger("error");break;case g.cast.media.IdleReason.FINISHED:this.ended_=!0,this.trigger("ended")}this.stopCasting_()}},src:function(a){},currentSrc:function(){return this.options_.source.src},seekable:function(){return d},mediaCastError_:function(a){},mediaCastSuccess_:function(){},apiCall_:function(a,b){this.apiMedia_[a](b||null,this.mediaCastSuccess_.bind(this),this.mediaCastError_.bind(this))},play:function(){this.apiMedia_&&(this.paused_&&this.apiCall_("play"),this.paused_=!1)},pause:function(){this.apiMedia_&&(this.paused_||(this.apiCall_("pause"),this.paused_=!0))},paused:function(){return this.paused_},currentTime:function(){return this.ended_?this.duration():this.currentTime_},setCurrentTime:function(a){if(this.apiMedia_){var b=new g.cast.media.SeekRequest;b.currentTime=a,this.currentTime_=a,this.apiCall_("seek",b)}},startProgressTimer_:function(){this.progressTimer_&&clearInterval(this.progressTimer_),this.progressTimer_=setInterval(this.incrementCurrentTime_.bind(this),1e3)},incrementCurrentTime_:function(){this.apiMedia_&&this.apiMedia_.playerState===g.cast.media.PlayerState.PLAYING&&(this.currentTime()<this.apiMedia_.media.duration?(this.currentTime_+=1,this.trigger("timeupdate")):clearInterval(this.progressTime_))},onSeekSuccess:function(a){},ended:function(){return this.ended_||this.duration()<=this.currentTime_},duration:function(){return this.apiMedia_?this.apiMedia_.media.duration:0},controls:function(){return!1},volume:function(){return this.volume_},setVolume:function(a){if(this.apiMedia_){var b=new g.cast.Volume,c=new g.cast.media.VolumeRequest;this.mediaCastSuccess_.bind(this,"Volume changed"),this.mediaCastError_.bind(this);b.level=a,this.volume_=a,c.volume=b,this.apiCall_("setVolume",c),this.trigger("volumechange")}},muted:function(){return this.muted_},setMuted:function(a){if(this.apiMedia_){var b=(new g.cast.Volume,new g.cast.media.VolumeRequest);this.mediaCastSuccess_.bind(this,"Mute changed"),this.mediaCastError_.bind(this);this.muted=a!==d&&!!a,this.apiCall_("setVolume",b),this.trigger("volumechange")}},supportsFullScreen:function(){return!1},resetSrc_:function(a){a()},dispose:function(){this.stopCasting_(),this.apiMedia_=d,this.apiSession_=d,this.resetSrc_(Function.prototype),f.prototype.dispose.apply(this,arguments)}});h.prototype.options_={},h.isSupported=function(){return!0},h.prototype.featuresVolumeControl=!0,h.prototype.featuresPlaybackRate=!1,h.prototype.movingMediaElementInDOM=!1,h.prototype.featuresFullscreenResize=!1,h.prototype.featuresTimeupdateEvents=!1,h.prototype.featuresProgressEvents=!1,h.prototype.featuresNativeTextTracks=!0,h.prototype.featuresNativeAudioTracks=!0,h.prototype.featuresNativeVideoTracks=!1,h.supportsCasting_=function(a){var b=/^application\/(?:dash\+xml|(x-|vnd\.apple\.)mpegurl)/i,c=/^video\/(mpd|mp4|webm|m3u8)/i;return b.test(a)?"probably":c.test(a)?"maybe":""},h.canPlaySource=function(a){return g&&a.type?this.supportsCasting_(a.type):this.supportsCasting_(a.src)},e.registerComponent("Chromecast",h),f.registerTech("Chromecast",h)}(window,window.videojs,document);