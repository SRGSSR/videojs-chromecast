/*! videojs-chromecast - v0.2.1 - 2018-11-13*/

!function(a,b){"use strict";b.registerPlugin("chromecast",function(c){var d,e,f,g,h,i,j=b.getTech("Chromecast"),k=c;this.canCastCurrentSrc_=function(){var a=j.canPlaySource(this.currentSource());return"maybe"===a||"probably"===a},this.getCastDeviceName=function(){return this.castName_},this.initCastConnection_=function(){null!=a.cast&&(g=this,d=a.cast.framework.CastContext.getInstance(),d.addEventListener(a.cast.framework.CastContextEventType.SESSION_STATE_CHANGED,function(b){switch(b.sessionState){case a.cast.framework.SessionState.SESSION_STARTED:this.onLaunchSuccess_();break;case a.cast.framework.SessionState.SESSION_RESUMED:break;case a.cast.framework.SessionState.SESSION_ENDED:this.onCastStopped_()}}.bind(this)),d.setOptions({receiverApplicationId:k.appID?k.appID:a.chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID}),g.trigger("chromecast-initialized"))},this.isCastReady=function(){return!!d},this.isCasting=function(){return!!e},this.launchCasting=function(){},this.onCastStopped_=function(a,b){if(e&&(e.endSession(!0),e=void 0),i.isLive)g.trigger("chromecast-stopped"),this.reset(),this.trigger("chromecast-force-to-live");else{var c=g.currentSrc(),d=f.currentTime;g.trigger("chromecast-stopped"),g.loadTech_("html5"),g.src({src:c}),g.currentTime(d),g.play()}},this.onLaunchSuccess_=function(b){e=a.cast.framework.CastContext.getInstance().getCurrentSession();var c=new a.chrome.cast.media.MediaInfo(k.urn);c.metadata=new a.chrome.cast.media.GenericMediaMetadata,c.metadata.title=k.title,c.metadata.subtitle=k.subtitle;var d=new a.chrome.cast.media.LoadRequest(c);d.currentTime=g.currentTime(),d.customData={server:k.server},this.castName_=e.getCastDevice().friendlyName,i=k.metadata,g.trigger("loading"),e.loadMedia(d).then(function(){f=new a.cast.framework.RemotePlayer,h=new a.cast.framework.RemotePlayerController(f),this.options_.chromecast={cast:a.chrome.cast,apiSession:e,localPlayer:g,remotePlayer:f,remotePlayerController:h},g.trigger("chromecast-media-loaded"),g.loadTech_("Chromecast")}.bind(this),function(b){a.console.log("Error code: "+b)})},this.one("ready",function(){this.initCastConnection_()})})}(window,window.videojs),function(a){"use strict";var b=a.getComponent("Component"),c=a.getTech("Tech"),d=window.chrome,e=a.extend(c,{constructor:function(a,b){c.prototype.constructor.apply(this,arguments),this.apiSession_=this.options_.apiSession,this.localPlayer_=this.options_.localPlayer,this.remotePlayer_=this.options_.remotePlayer,this.remotePlayerController_=this.options_.remotePlayerController,this.currentTime_=this.localPlayer_.currentTime(),this.urn_=this.options_.urn,this.remotePlayer_.paused_=!1,this.remotePlayer_.muted_=!1,this.startProgressTimer_(),this.triggerReady(),this.remotePlayer_.isMuted&&this.remotePlayerController_.muteOrUnmute(),this.localPlayer_.trigger("play")},_playOrPause:function(){this.remotePlayer_.isPaused?this.localPlayer_.trigger("pause"):this.localPlayer_.trigger("play"),this.remotePlayerController_.playOrPause()},buffered:function(){},controls:function(){return!1},currentTime:function(){return this.remotePlayer_.currentTime},dispose:function(){},duration:function(){return this.remotePlayer_.duration},ended:function(){return this.remotePlayer_.duration<=this.remotePlayer_.currentTime},incrementCurrentTime_:function(){this.remotePlayer_&&"PLAYING"===this.remotePlayer_.playerState&&(this.remotePlayer_.currentTime<this.remotePlayer_.duration?(this.currentTime_=this.remotePlayer_.currentTime,this.trigger("timeupdate")):clearInterval(this.progressTime_))},muted:function(){return this.muted_},onSeekSuccess:function(a){},play:function(){this._playOrPause()},pause:function(){this._playOrPause()},paused:function(){return this.remotePlayer_.isPaused},resetSrc_:function(a){a()},seekable:function(){},seek:function(a){this.setCurrentTime(a)},setCurrentTime:function(a){var b=this._remotePlayer.duration;this._remotePlayer.currentTime=Math.min(b-1,a),this.remotePlayerController_.seek()},setMuted:function(a){},setVolume:function(a){},startProgressTimer_:function(){this.progressTimer_&&clearInterval(this.progressTimer_),this.progressTimer_=setInterval(this.incrementCurrentTime_.bind(this),1e3)},stopCasting:function(){this.apiSession_&&(this.apiSession_.endSession(!0),this.apiSession_=void 0)},supportsFullScreen:function(){},supportsStarttime:function(){return!1},volume:function(){}});e.prototype.options_={},e.prototype.featuresVolumeControl=!0,e.prototype.featuresPlaybackRate=!1,e.prototype.movingMediaElementInDOM=!1,e.prototype.featuresFullscreenResize=!1,e.prototype.featuresTimeupdateEvents=!1,e.prototype.featuresProgressEvents=!1,e.prototype.featuresNativeTextTracks=!0,e.prototype.featuresNativeAudioTracks=!0,e.prototype.featuresNativeVideoTracks=!1,e.canPlaySource=function(a){return d&&a.type?this.supportsCasting_(a.type):this.supportsCasting_(a.src)},e.isSupported=function(){return!0},e.supportsCasting_=function(a){var b=/^application\/(?:dash\+xml|(x-|vnd\.apple\.)mpegurl)/i,c=/^video\/(mpd|mp4|webm|m3u8)/i;return b.test(a)?"probably":c.test(a)?"maybe":""},void 0!==c.registerTech?c.registerTech("Chromecast",e):b.registerComponent("Chromecast",e)}(window.videojs,document);